webpackJsonp([1],{NHnr:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=s("7+uW"),a={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-dialog",{attrs:{visible:e.$store.state.show},on:{"update:visible":function(t){e.$set(e.$store.state,"show",t)}}})},staticRenderFns:[]},o={data:function(){return{show:!1,mytype:[{type:"杂木1",onffo:!1},{type:"杂木2",onffo:!0},{type:"杂木3",onffo:!1},{type:"杂木4",onffo:!1},{type:"杂木5",onffo:!1},{type:"杂木6",onffo:!1}]}},components:{"t-dialog":s("VU/8")({},a,!1,null,null,null).exports},methods:{name:function(e){return e}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("t-dialog",{attrs:{show:e.show},on:{"update:show":function(t){e.show=t}}}),e._v(" "),i("br")],1)},staticRenderFns:[]},c=s("VU/8")(o,l,!1,null,null,null).exports,r={name:"App",components:{Test:c}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view"),e._v(" "),i("div",{staticClass:"bott-nav"},[i("el-row",[i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex nav-lins-color"},[e._v("计算")])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex"},[e._v("材积表")])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex"},[e._v("关于产品")])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex"},[e._v("个人服务")])])],1)],1)],1)},staticRenderFns:[]};var u=s("VU/8")(r,d,!1,function(e){s("VFhj")},null,null).exports,h=s("zL8q"),p=s.n(h),m=s("/ocq"),v=s("mvHQ"),f=s.n(v),w=s("Dd8w"),_=s.n(w),b={name:"Home",components:{},data:function(){return{data:[],L:1.8,D:14,nubValue:1,little:0,medium:0,big:0,sum:0,isOpacity:[!1,!1,!1],defaultProps:{children:"children",label:"label"},addId:0,clickWood:[],showgroup:"",showSum:0,wood:[{name:"杂木",statu:!1,tree:{size:[{d:-1,m:500,s:0,n:"little"}]}},{name:"樟木",statu:!1,tree:{size:[{d:-1,m:600,s:0,n:"little"},{d:20,m:1e3,s:1,n:"medium"},{d:30,m:1500,s:2,n:"big"}]}},{name:"苦楝木",statu:!1,tree:{size:[{d:-1,m:500,s:0,n:"little"},{d:20,m:600,s:1,n:"big"}]}},{name:"春芽木",statu:!1,tree:{}},{name:"其他木",statu:!1,tree:{}}]}},watch:{showgroup:function(e,t){var i=this,s=this.data.findIndex(function(e,t,s){return e.label==i.showgroup});if(""!=e){var n=[this.data[s],this.isOpacity],a=n[1];switch(n[0].children.length){case 1:a[0]=!1,a[2]=!0,a[1]=!0;break;case 2:a[0]=!1,a[1]=!0,a[2]=!1;break;case 3:a[0]=!1,a[1]=!1,a[2]=!1;break;default:alert("数据异常")}}var o=this.clickWood;return this.little=o.little,this.medium=o.medium,this.big=o.big,this.sum=o.sum,this.showgroup},sum:function(){var e=0;return this.data.forEach(function(t){e+=t.sum}),this.showSum=+e.newTofixed(5)}},methods:{handleCommand:function(e){console.clear();var t=this,i=t.wood,s=0,n=0;switch(e){case i[0].name:s=0;break;case i[1].name:s=1,n=2;break;case i[2].name:s=2,n=1;break;default:return t.$message("当前木头信息尚未收集，等待开发"),!1}i[s].tree=_()({},i[s].tree,this.initWoddType(n,e)),t.data.push(i[s].tree),i[s].statu=!i[s].statu},showDelete:function(e){var t=!0;switch(e){case"大":case"中":case"小":t=!t}return t},handleNodeClick:function(e,t,i){this.woodTIndex().indexOf(e.label)>-1&&(i.$el.parentNode.querySelectorAll(".select-wood").length>0&&i.$el.parentNode.querySelector(".select-wood").classList.remove("select-wood"),i.$el.childNodes[0].className+=" select-wood",this.showgroup=e.label,this.clickWood=e)},calculations:function(){if(!this.showgroup)return this.open_warn("请选择木材"),!1;this.nubValue<=0&&(this.open_warn("至少数量为1"),this.nubValue=1);var e=this.clickWood.size,t=e[0].m,i=e[0].n,s=0;e[2]&&this.D>=e[2].d?(t=e[2].m,i=e[2].n,s=2):e[1]&&this.D>=e[1].d&&(t=e[1].m,i=e[1].n,s=1),this[i]=(this[i]+g(this.L,this.D)*this.nubValue).newTofixed(3);var n=0,a=0,o=0;3==e.length?(n=0,a=1,o=2):2==e.length&&(n=0,a=0,o=1);var l=Number(this.little*e[n].m+this.medium*e[a].m+this.big*e[o].m).newTofixed(3);this.sum=+l.newTofixed(3),this.append(s,t),this.$message({message:"填写的值为"+this.L+" X "+this.D+" 数量为："+this.nubValue,showClose:!0,type:"success"}),this.clickWood.little=+this.little,this.clickWood.medium=+this.medium,this.clickWood.big=+this.big,this.clickWood.sum=+this.sum,this.nubValue=1},append:function(e,t){var i=String(this.L+"x"+this.D),s="",n=e,a=this.clickWood.children[n].unRepe;if(a[i]){a[i].num=Number(a[i].num+this.nubValue);for(var o=this.clickWood.children[n].children,l=0,c=0;c<o.length;c++)if(o[c]&&o[c].label.split(" 根")[0]==i){l=o[c].id,o.splice(c,1);break}var r={id:l,label:s=i+" 根:"+a[i].num+" 材积:"+a[i].univalence+" "};this.clickWood.children[n].children.push(r)}else{a[i]={num:this.nubValue,univalence:g(this.L,this.D)},s=i+" 根:"+a[i].num+" 材积:"+a[i].univalence+" ";var d={id:this.addId++,label:s};a.type[1]=t,this.clickWood.children[n].children.push(d)}},initWoddType:function(e,t){var i=this,s={id:i.addId++,label:t,sum:0,big:0,little:0,medium:0,children:[{id:i.addId++,label:"小",children:[],unRepe:{type:["小",0,0]}}]},n=this.clone(s.children[0]);switch(e){case 2:var a=this.clone(s.children[0]);a.unRepe.type[0]="中",a.unRepe.type[2]=1,a.label=a.unRepe.type[0],a.id=i.addId++,s.children.push(_()({},a));case 1:n.unRepe.type[0]="大",n.unRepe.type[2]=2,n.label=n.unRepe.type[0],n.id=i.addId++,s.children.push(_()({},n))}return s},woodTIndex:function(){var e=[];return this.wood.forEach(function(t){e.push(t.name)}),e},remove:function(t,i){if(!confirm("是否删除"))return!1;var s=t.parent,n=i.label.split(" 根"),a=n[0];if(n[1]){var o=s.data.unRepe[a],l=[o.num,o.univalence],c=l[0],r=l[1],d=s.data.unRepe.type,u=(c*r).newTofixed(3),h="";switch(d[2]){case 0:h="little";break;case 2:h="big";break;default:h="medium"}this.clickWood[h]=(this.clickWood[h]-u).newTofixed(3),this.little=this.clickWood.little.newTofixed(3),this.big=this.clickWood.big.newTofixed(3),this.medium=this.clickWood.medium.newTofixed(3);var p=0,m=0,v=0;3==this.clickWood.size.length?(p=0,m=1,v=2):2==this.clickWood.size.length&&(p=0,m=0,v=1),this.clickWood.sum=(this.clickWood.little*this.clickWood.size[p].m+this.clickWood.medium*this.clickWood.size[m].m+this.clickWood.big*this.clickWood.size[v].m).newTofixed(3),this.sum=+this.clickWood.sum,delete s.data.unRepe[a]}else this.little=0,this.medium=0,this.big=0,this.sum=0,this.showgroup="";var f=s.data.children||s.data,w=f.findIndex(function(e){return e.id===i.id});if(f.splice(w,1),this.woodTIndex().indexOf(i.label)>-1){var _=this.woodTIndex().indexOf(i.label);this.wood[_].statu=!1}window.event?window.event.cancelBubble=!0:e.stopPropagation()},open_warn:function(e){this.$message({message:e,showClose:!0,type:"warning"})},clone:function(e){return JSON.parse(f()(e))}}};function g(e,t,i){var s=0;t>4&&t<=12&&e>=2&&e<10?s=.7854*e*Math.pow(t+.45*e+.2,2)/Math.pow(10,4):s=t>=14&&e>=2&&e<10?.7854*e*Math.pow([t+.5*e+.005*Math.pow(e,2)+125e-6*e*Math.pow(14-e,2)*(t-10)],2)/1e4:.8*e*Math.pow(t+.5*e,2)/Math.pow(10,4);return+(s=s.newTofixed(3))}Number.prototype.newTofixed=function(e){if(e&&1!==this.toString().split(".").length){var t=this.toString().split(".")[1].length,i=e||t;return t=Math.pow(10,i),Math.round(this*t)/t}return this.valueOf()};var k={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[e._m(0),e._v(" "),i("main",{staticStyle:{height:"100%"}},[i("div",{staticClass:"main-class"},[i("el-row",{staticClass:"head-conte"},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content   vertical-flex"},[e._v("木材表")])]),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content  vertical-flex"},[i("el-dropdown",{on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link "},[e._v("\n        添加木材"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.wood,function(t,s,n){return i("el-dropdown-item",{key:n,attrs:{disabled:t.statu,command:t.name}},[e._v(e._s(t.name))])}))],1)],1)])],1),e._v(" "),i("div",{staticClass:"block height40"},[i("el-tree",{ref:"tree",attrs:{data:e.data,props:e.defaultProps,"node-key":"id"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,n=t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[e._v(e._s(s.label))]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.showDelete(s.label),expression:"showDelete(node.label)"}]},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(s,n)}}},[e._v(" 删除")])],1)])}}])})],1)],1)]),e._v(" "),i("div",{staticClass:"input-box"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("总额 ："+e._s(e.showSum)+" ")])]),e._v(" "),i("div",{staticClass:"text item",on:{click:e.calculations}},[i("div",{class:{opacityfont:e.isOpacity[0]}},[e._v("小："),i("span",[e._v(e._s(e.little))])]),e._v(" "),i("div",{class:{opacityfont:e.isOpacity[1]}},[e._v("中："),i("span",{domProps:{textContent:e._s(e.medium)}},[e._v("0")])]),e._v(" "),i("div",{class:{opacityfont:e.isOpacity[2]}},[e._v("大："),i("span",{domProps:{textContent:e._s(e.big)}},[e._v("0")])]),e._v(" "),i("div",[i("span",{domProps:{textContent:e._s(e.showgroup)}}),e._v("组和："),i("span",{domProps:{textContent:e._s(e.sum)}},[e._v("0.00")]),e._v("元")])])]),e._v(" "),i("div",[i("div",{staticClass:"el-input el-input-group el-input-group--prepend "},[e._m(1),e._v(" "),i("el-input-number",{attrs:{size:"medium",precision:1,step:.2,max:10},model:{value:e.L,callback:function(t){e.L=t},expression:"L"}})],1)]),e._v(" "),i("div",[i("div",{staticClass:"el-input el-input-group el-input-group--prepend "},[e._m(2),e._v(" "),i("el-input-number",{attrs:{size:"medium",precision:2,step:2,max:100},model:{value:e.D,callback:function(t){e.D=t},expression:"D"}})],1)]),e._v(" "),i("div",{staticClass:"block margin-top10"},[e._v(" 数量\n  "),i("el-slider",{attrs:{"show-input":""},model:{value:e.nubValue,callback:function(t){e.nubValue=t},expression:"nubValue"}})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("nav",[t("div",{staticClass:"header"},[t("div",{staticClass:"header-top"},[this._v("材积表计算 ")]),this._v(" "),t("div",{staticClass:"share-top"},[this._v(" 关于 ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"el-input-group__prepend"},[this._v("L 长度\n        "),t("span",[this._v("m   ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"el-input-group__prepend"},[this._v("D 直径\n        "),t("span",[this._v("cm")])])}]};var x=s("VU/8")(b,k,!1,function(e){s("dsBu")},null,null).exports;n.default.use(m.a);var y=new m.a({routes:[{path:"/",name:"Home",component:x},{path:"/test",name:"test",component:c}]}),C=s("NYxO");s("tvR6"),s("SWQJ");n.default.use(C.a);var W=new C.a.Store({state:{woodtype:"",tree:[],id:-1},actions:{changeGroup:function(e,t){e.commit("changetreeLable",t)}},mutations:{changetreeLable:function(e,t){e.tree=t,e.woodtype=t.label}}});n.default.use(p.a),n.default.use(C.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:y,store:W,components:{App:u},template:"<App/>"})},SWQJ:function(e,t){},VFhj:function(e,t){},dsBu:function(e,t){},tvR6:function(e,t){}},["NHnr"]);