webpackJsonp([1],{"7haX":function(t,e){},Lc6r:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),a={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-dialog",{attrs:{visible:t.$store.state.show},on:{"update:visible":function(e){t.$set(t.$store.state,"show",e)}}})},staticRenderFns:[]},s={data:function(){return{show:!1,mytype:[{type:"杂木1",onffo:!1},{type:"杂木2",onffo:!0},{type:"杂木3",onffo:!1},{type:"杂木4",onffo:!1},{type:"杂木5",onffo:!1},{type:"杂木6",onffo:!1}]}},components:{"t-dialog":i("VU/8")({},a,!1,null,null,null).exports},methods:{name:function(t){return t}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("t-dialog",{attrs:{show:t.show},on:{"update:show":function(e){t.show=e}}}),t._v(" "),i("br")],1)},staticRenderFns:[]},l=i("VU/8")(s,o,!1,null,null,null).exports,r={name:"App",components:{Test:l}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view"),t._v(" "),i("div",{staticClass:"bott-nav"},[i("el-row",[i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex nav-lins-color"},[t._v("计算")])]),t._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex"},[t._v("材积表")])]),t._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex"},[t._v("关于产品")])]),t._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex"},[t._v("个人服务")])])],1)],1)],1)},staticRenderFns:[]};var c=i("VU/8")(r,d,!1,function(t){i("Lc6r")},null,null).exports,u=i("zL8q"),p=i.n(u),h=i("/ocq"),v={name:"Home",components:{},data:function(){return{data:[],L:2,D:14,nubValue:1,little:0,medium:0,big:0,sum:0,tree:[],isOpacity:[!1,!1,!1],defaultProps:{children:"children",label:"label"},addId:0,woodType:[{type:"杂木",statu:!1},{type:"樟木",statu:!0},{type:"苦楝木",statu:!0},{type:"春芽木",statu:!0},{type:"其他木",statu:!0}],clickWood:[],woodT:[],showgroup:""}},watch:{showgroup:function(t,e){var i=this;console.log("show:",t);var n=this.data.findIndex(function(t,e,n){return t.label==i.showgroup});if(""!=t){var a=[this.data[n],this.isOpacity],s=a[1];switch(a[0].children.length){case 1:s[0]=!1,s[2]=!0,s[1]=!0;break;case 2:s[0]=!1,s[1]=!0,s[2]=!1;break;case 3:s[0]=!1,s[1]=!1,s[2]=!1;break;default:alert("数据异常")}}return this.little=0,this.medium=0,this.big=0,this.sum=0,this.showgroup}},methods:{handleCommand:function(t){console.clear();var e=this;console.log("command",t);var i=e.woodType;switch(t){case i[0].type:this.data.push({id:e.addId++,label:t,sum:0,children:[{id:e.addId++,label:"小 L X D",children:[],big:[]}]}),i[0].statu=!0;break;case i[1].type:e.data.push({id:e.addId++,label:t,children:[{id:e.addId++,label:"小",children:[],big:["2 x 14"]},{id:e.addId++,label:"中",children:[],big:["2 x 14"]},{id:e.addId++,label:"大",children:[],big:[]}]}),i[1].statu=!0;break;case i[2].type:e.data.push({id:e.addId++,label:t,children:[{id:e.addId++,label:"小",children:[]},{id:e.addId++,label:"大",children:[]}]}),i[2].statu=!0;break;default:e.$message("当前木头信息尚未收集，等待开发")}},handleNodeClick:function(t,e,i){console.log("handleNodeCilk",t),this.woodTIndex().indexOf(t.label)>-1&&(i.$el.parentNode.querySelectorAll(".select-wood").length>0&&i.$el.parentNode.querySelector(".select-wood").classList.remove("select-wood"),i.$el.childNodes[0].className+=" select-wood",this.showgroup=t.label,this.clickWood=t)},calculations:function(){if(""==this.showgroup)return this.open_warn("请选择木材"),!1;var t=this.selectType(this.showgroup,this.D).m;this.append(this.addSum(t))},append:function(t){var e=void 0,i=String(this.L+"x"+this.D);console.log("repe",i.length);var n=this.clickWood.children[0].big.filter(function(t){return t.only==i});if(console.log("repeValue.length",n.length),n.length>0){console.log("append重复进入");for(var a=this.clickWood.children[0].children,s=0;s<a.length;s++)a[s]&&a[s].label.split(" 根")[0]==i&&a.splice(s,1);var o=n[0].nub+=this.nubValue;console.log("nub ",o);var l=console.log(l);e=[this.L,"x",this.D," 根:",o," 单个",this.valeData()," ￥",0]}else console.log("append 第一次进入"),e=[this.L,"x",this.D," 根:",this.nubValue," 单个",this.valeData()," ￥",0],this.clickWood.children[0].big.push({only:e[0]+e[1]+e[2],nub:this.nubValue});e[8]=(e[8]+e[4]*+this.valeData()*500).toFixed(3),this.clickWood.sum=t;var r={id:this.addId++,label:e.join("")};this.clickWood.children[0].children||this.$set(this.clickWood,"children",[]),this.clickWood.children[0].children.push(r)},woodTIndex:function(){var t=[];return this.woodType.forEach(function(e){t.push(e.type)}),t},remove:function(t,e,i){if(console.log("删除",e.label),this.woodTIndex().indexOf(e.label)>-1){var n=this.woodTIndex().indexOf(e.label);this.woodType[n].statu=!1}this.showgroup="",this.little=0,this.medium=0,this.big=0,this.sum=0;var a=t.parent,s=a.data.children||a.data,o=s.findIndex(function(t){return t.id===e.id});s.splice(o,1),window.event?window.event.cancelBubble=!0:i.stopPropagation()},selectType:function(t,e){console.log(t,e);var i=0,n=0;return"樟木"==t?e>=30?(i=1500,n=+(this.big+this.valeData()),this.big=+n.toFixed(3)):e>=20?(i=1e3,n=+(this.medium+this.valeData()),this.medium=+n.toFixed(3)):(i=600,n=+(this.little+this.valeData()),this.little=+n.toFixed(3)):"苦楝木"==t&&e>=20?(i=600,n=+(this.big+this.valeData()),this.big=+n.toFixed(3)):(i=500,n=+(this.little+this.valeData()),this.little=+n.toFixed(3)),{m:i,n:n}},valeData:function(){return+(function(t,e,i){var n=0;if(e>4&&e<=12&&t>=2&&t<10){var a=Math.pow(e+.45*t+.2,2);n=.7854*t*a/Math.pow(10,4)}else n=e>=14&&t>=2&&t<10?.7854*t*Math.pow([e+.5*t+.005*Math.pow(t,2)+125e-6*t*Math.pow(14-t,2)*(e-10)],2)/1e4:.8*t*Math.pow(e+.5*t,2)/Math.pow(10,4);return+(n=n.toFixed(3))}(this.L,this.D)*this.nubValue).toFixed(3)},addSum:function(t){var e=+t,i=void 0===e?1:e,n=Number(this.little+this.medium+this.big)*i;return this.sum=n.toFixed(3)},open_warn:function(t){this.$message({message:t,type:"warning"})}}};Number.prototype.toFixed=function(t){var e=this+"";if(t||(t=0),-1==e.indexOf(".")&&(e+="."),e+=new Array(t+1).join("0"),new RegExp("^(-|\\+)?(\\d+(\\.\\d{0,"+(t+1)+"})?)\\d*$").test(e)){e="0"+RegExp.$2;var i=RegExp.$1,n=RegExp.$3.length,a=!0;if(n==t+2){if(n=e.match(/\d/g),parseInt(n[n.length-1])>4)for(var s=n.length-2;s>=0&&(n[s]=parseInt(n[s])+1,10==n[s]);s--)n[s]=0,a=1!=s;e=n.join("").replace(new RegExp("(\\d+)(\\d{"+t+"})\\d$"),"$1.$2")}return a&&(e=e.substr(1)),(i+e).replace(/\.$/,"")}return this+""},Math.formatFloat=function(t,e){var i=t.toString().split(".")[1].length,n=void 0===e?i:e;return n=Math.pow(10,n),Math.round(t*n)/n};var f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("nav",[i("div",{staticClass:"header"},[i("center",[t._v("\n      材积表计算\n      ")])],1)]),t._v(" "),i("main",{staticStyle:{height:"100%"}},[i("div",{staticClass:"main-class"},[i("el-row",{staticClass:"head-conte"},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content   vertical-flex"},[t._v("木材表")])]),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content  vertical-flex"},[i("el-dropdown",{on:{command:t.handleCommand}},[i("span",{staticClass:"el-dropdown-link "},[t._v("\n          添加木材"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.woodType,function(e,n,a){return i("el-dropdown-item",{key:a,attrs:{disabled:e.statu,command:e.type}},[t._v(t._s(e.type))])}))],1)],1)])],1),t._v(" "),i("div",{staticClass:"block height40"},[i("el-tree",{ref:"tree",attrs:{data:t.data,props:t.defaultProps,"node-key":"id"},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,a=e.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[t._v(t._s(n.label))]),t._v(" "),i("span",[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.remove(n,a)}}},[t._v("\n              Delete\n            ")])],1)])}}])})],1)],1)]),t._v(" "),i("div",{staticClass:"input-box"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("总额 ："+t._s(t.clickWood.sum)+" ")])]),t._v(" "),i("div",{staticClass:"text item",on:{click:t.calculations}},[i("div",{class:{opacityfont:t.isOpacity[0]}},[t._v("小："),i("span",[t._v(t._s(t.little))])]),t._v(" "),i("div",{class:{opacityfont:t.isOpacity[1]}},[t._v("中："),i("span",{domProps:{textContent:t._s(t.medium)}},[t._v("0")])]),t._v(" "),i("div",{class:{opacityfont:t.isOpacity[2]}},[t._v("大："),i("span",{domProps:{textContent:t._s(t.big)}},[t._v("0")])]),t._v(" "),i("div",[i("span",{domProps:{textContent:t._s(t.showgroup)}}),t._v("组和："),i("span",{domProps:{textContent:t._s(t.sum)}},[t._v("0.00")]),t._v("元")])])]),t._v(" "),i("div",[i("div",{staticClass:"el-input el-input-group el-input-group--prepend "},[t._m(0),t._v(" "),i("el-input-number",{attrs:{size:"medium",precision:1,step:.2,max:10},model:{value:t.L,callback:function(e){t.L=e},expression:"L"}})],1)]),t._v(" "),i("div",[i("div",{staticClass:"el-input el-input-group el-input-group--prepend "},[t._m(1),t._v(" "),i("el-input-number",{attrs:{size:"medium",precision:2,step:2,max:100},model:{value:t.D,callback:function(e){t.D=e},expression:"D"}})],1)]),t._v(" "),i("div",{staticClass:"block margin-top10"},[t._v("\n      数量\n    "),i("el-slider",{attrs:{"show-input":""},model:{value:t.nubValue,callback:function(e){t.nubValue=e},expression:"nubValue"}})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"el-input-group__prepend"},[this._v("L 长度\n          "),e("span",[this._v("m   ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"el-input-group__prepend"},[this._v("D 直径\n          "),e("span",[this._v("cm")])])}]};var m=i("VU/8")(v,f,!1,function(t){i("7haX")},null,null).exports;n.default.use(h.a);var g=new h.a({routes:[{path:"/",name:"Home",component:m},{path:"/test",name:"test",component:l}]}),b=i("NYxO");i("tvR6"),i("SWQJ");n.default.use(b.a);var _=new b.a.Store({state:{woodtype:"",tree:[],id:-1},actions:{changeGroup:function(t,e){t.commit("changetreeLable",e)}},mutations:{changetreeLable:function(t,e){t.tree=e,t.woodtype=e.label}}});n.default.use(p.a),n.default.use(b.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:g,store:_,components:{App:c},template:"<App/>"})},SWQJ:function(t,e){},tvR6:function(t,e){}},["NHnr"]);