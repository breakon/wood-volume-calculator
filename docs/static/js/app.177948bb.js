webpackJsonp([1],{NHnr:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=s("7+uW"),o={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-dialog",{attrs:{visible:e.$store.state.show},on:{"update:visible":function(t){e.$set(e.$store.state,"show",t)}}})},staticRenderFns:[]},a={data:function(){return{show:!1,mytype:[{type:"杂木1",onffo:!1},{type:"杂木2",onffo:!0},{type:"杂木3",onffo:!1},{type:"杂木4",onffo:!1},{type:"杂木5",onffo:!1},{type:"杂木6",onffo:!1}]}},components:{"t-dialog":s("VU/8")({},o,!1,null,null,null).exports},methods:{name:function(e){return e}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("t-dialog",{attrs:{show:e.show},on:{"update:show":function(t){e.show=t}}}),e._v(" "),i("br")],1)},staticRenderFns:[]},c=s("VU/8")(a,l,!1,null,null,null).exports,r={name:"App",components:{Test:c}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view"),e._v(" "),i("div",{staticClass:"bott-nav"},[i("el-row",[i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex nav-lins-color"},[e._v("计算")])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex"},[e._v("材积表")])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex"},[e._v("关于产品")])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content vertical-flex"},[e._v("个人服务")])])],1)],1)],1)},staticRenderFns:[]};var u=s("VU/8")(r,d,!1,function(e){s("VFhj")},null,null).exports,h=s("zL8q"),p=s.n(h),m=s("/ocq"),v=s("mvHQ"),f=s.n(v),w=s("BO1k"),b=s.n(w),_=s("Dd8w"),g=s.n(_),k={name:"Home",components:{},data:function(){return{data:[],L:1.8,D:14,nubValue:1,little:0,medium:0,big:0,sum:0,isOpacity:[!1,!1,!1],defaultProps:{children:"children",label:"label"},addId:0,clickWood:[],showgroup:"",showSum:0,wood:[{name:"杂木",statu:!1,tree:{size:[{d:-1,m:500,s:0,n:"little"}]}},{name:"樟木",statu:!1,tree:{size:[{d:-1,m:600,s:0,n:"little"},{d:20,m:1e3,s:1,n:"medium"},{d:30,m:1500,s:2,n:"big"}]}},{name:"苦楝木",statu:!1,tree:{size:[{d:-1,m:500,s:0,n:"little"},{d:20,m:600,s:1,n:"big"}]}},{name:"春芽木",statu:!1,tree:{}},{name:"其他木",statu:!1,tree:{}}]}},watch:{showgroup:function(e,t){var i=this;console.log("show:",e);var s=this.data.findIndex(function(e,t,s){return e.label==i.showgroup});if(""!=e){var n=[this.data[s],this.isOpacity],o=n[1];switch(n[0].children.length){case 1:o[0]=!1,o[2]=!0,o[1]=!0;break;case 2:o[0]=!1,o[1]=!0,o[2]=!1;break;case 3:o[0]=!1,o[1]=!1,o[2]=!1;break;default:alert("数据异常")}}var a=this.clickWood;return this.little=a.little,this.medium=a.medium,this.big=a.big,this.sum=a.sum,this.showgroup},sum:function(){var e=0;return this.data.forEach(function(t){e+=t.sum}),this.showSum=e.newTofixed(5)}},methods:{handleCommand:function(e){console.clear(),console.log("command",e);var t=this,i=t.wood,s=0,n=0;switch(e){case i[0].name:s=0;break;case i[1].name:s=1,n=2;break;case i[2].name:s=2,n=1;break;default:return t.$message("当前木头信息尚未收集，等待开发"),!1}i[s].tree=g()({},i[s].tree,this.initWoddType(n,e)),t.data.push(i[s].tree),i[s].statu=!i[s].statu},showDelete:function(e){var t=!0;switch(e){case"大":case"中":case"小":t=!t}return t},handleNodeClick:function(e,t,i){this.woodTIndex().indexOf(e.label)>-1&&(i.$el.parentNode.querySelectorAll(".select-wood").length>0&&i.$el.parentNode.querySelector(".select-wood").classList.remove("select-wood"),i.$el.childNodes[0].className+=" select-wood",this.showgroup=e.label,console.log("handleNodeCilk",e),this.clickWood=e)},calculations:function(){if(!this.showgroup)return this.open_warn("请选择木材"),!1;this.nubValue<=0&&(this.open_warn("至少数量为1"),this.nubValue=1);var e=this.clickWood.size,t=e[0].m,i=e[0].n,s=0;e[2]&&this.D>=e[2].d?(t=e[2].m,i=e[2].n,s=2):e[1]&&this.D>=e[1].d&&(t=e[1].m,i=e[1].n,s=1),this[i]=(this[i]+x(this.L,this.D)*this.nubValue).newTofixed(3);var n=0,o=0,a=0;3==e.length?(n=0,o=1,a=2):2==e.length&&(n=0,o=0,a=1);var l=Number(this.little*e[n].m+this.medium*e[o].m+this.big*e[a].m).newTofixed(3);this.sum=l.newTofixed(3),this.append(s,t),this.$message({message:"填写的值为"+this.L+" X "+this.D+" 数量为："+this.nubValue,showClose:!0,type:"success"}),this.clickWood.little=this.little,this.clickWood.medium=this.medium,this.clickWood.big=this.big,this.clickWood.sum=this.sum,this.nubValue=1},append:function(e,t){var i=String(this.L+"x"+this.D),s="",n=e,o=this.clickWood.children[n].unRepe;if(o[i]){o[i].num=Number(o[i].num+this.nubValue);for(var a=this.clickWood.children[n].children,l=0,c=0;c<a.length;c++)if(a[c]&&a[c].label.split(" 根")[0]==i){l=a[c].id,a.splice(c,1);break}var r={id:l,label:s=i+" 根:"+o[i].num+" 材积:"+o[i].univalence+" "};console.log(r),this.clickWood.children[n].children.push(r)}else{console.log("新的值newUnRepe",this.nubValue),o[i]={num:this.nubValue,univalence:x(this.L,this.D)},s=i+" 根:"+o[i].num+" 材积:"+o[i].univalence+" ";var d={id:this.addId++,label:s};o.type[1]=t,this.clickWood.children[n].children.push(d)}},initWoddType:function(e,t){var i=this,s={id:i.addId++,label:t,sum:0,big:0,little:0,medium:0,children:[{id:i.addId++,label:"小",children:[],unRepe:{type:["小",0,0]}}]},n=this.clone(s.children[0]);switch(e){case 2:var o=this.clone(s.children[0]);o.unRepe.type[0]="中",o.unRepe.type[2]=1,o.label=o.unRepe.type[0],o.id=i.addId++,s.children.push(g()({},o));case 1:n.unRepe.type[0]="大",n.unRepe.type[2]=2,n.label=n.unRepe.type[0],n.id=i.addId++,s.children.push(g()({},n))}return console.log("type:",s),s},woodTIndex:function(){var e=[];return this.wood.forEach(function(t){e.push(t.name)}),e},remove:function(t,i){var s=this.clickWood.children.findIndex(function(e){return e.id==t.parent.data.id});if(s=this.clickWood.id===i.id?1:s,!confirm("是否删除")||s<0)return s<0&&this.open_warn("只能选择删除当前选择木头，请选择后再操作"),window.event?window.event.cancelBubble=!0:e.stopPropagation(),!1;var n=t.parent,o=i.label.split(" 根"),a=o[0];if(o[1]){var l=n.data.unRepe[a],c=[l.num,l.univalence],r=c[0],d=c[1],u=n.data.unRepe.type,h=(r*d).newTofixed(3),p="";switch(u[2]){case 0:p="little";break;case 2:p="big";break;default:p="medium"}this.clickWood[p]=(this.clickWood[p]-h).newTofixed(3),console.log("删除时候当前的点击的木头总价",h),console.log("type[1]",u[1]),this.little=this.clickWood.little.newTofixed(3),this.big=this.clickWood.big.newTofixed(3),this.medium=this.clickWood.medium.newTofixed(3);var m=0,v=0,f=0;3==this.clickWood.size.length?(m=0,v=1,f=2):2==this.clickWood.size.length&&(m=0,v=0,f=1),this.clickWood.sum=(this.clickWood.little*this.clickWood.size[m].m+this.clickWood.medium*this.clickWood.size[v].m+this.clickWood.big*this.clickWood.size[f].m).newTofixed(3),console.log(this.clickWood.sum),this.sum=this.clickWood.sum,delete n.data.unRepe[a]}else this.little=0,this.medium=0,this.big=0,this.sum=0,this.showgroup="";var w=n.data.children||n.data,b=w.findIndex(function(e){return e.id===i.id});if(w.splice(b,1),this.woodTIndex().indexOf(i.label)>-1){var _=this.woodTIndex().indexOf(i.label);this.wood[_].statu=!1}window.event?window.event.cancelBubble=!0:e.stopPropagation()},resetCalcula:function(){if(!confirm("是否清空"))return!1;this.data=[],this.showgroup="";var e=!0,t=!1,i=void 0;try{for(var s,n=b()(this.wood);!(e=(s=n.next()).done);e=!0){s.value.statu=!1}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}},open:function(){this.$alert("  本软件是开源，使用方法很简单，添加木材后，\n        选择目录树进行切换木材，如果觉得有bug或者建议可以联系我。联系方式：djl@breakon.top","关于",{confirmButtonText:"关闭"})},open_warn:function(e){this.$message({message:e,showClose:!0,type:"warning"})},clone:function(e){return JSON.parse(f()(e))}}};function x(e,t,i){var s=0;t>4&&t<=12&&e>=2&&e<10?s=.7854*e*Math.pow(t+.45*e+.2,2)/Math.pow(10,4):s=t>=14&&e>=2&&e<10?.7854*e*Math.pow([t+.5*e+.005*Math.pow(e,2)+125e-6*e*Math.pow(14-e,2)*(t-10)],2)/1e4:.8*e*Math.pow(t+.5*e,2)/Math.pow(10,4);return+(s=s.newTofixed(3))}Number.prototype.newTofixed=function(e){if(e&&1!==this.toString().split(".").length){var t=this.toString().split(".")[1].length,i=e||t;return t=Math.pow(10,i),Math.round(this*t)/t}return this.valueOf()};var y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[i("nav",[i("div",{staticClass:"header"},[i("div",{staticClass:"header-top"},[e._v("材积表计算 ")]),e._v(" "),i("div",{staticClass:"share-top",on:{click:e.open}},[e._v(" 关于 ")])])]),e._v(" "),i("main",{staticStyle:{height:"100%"}},[i("div",{staticClass:"main-class"},[i("el-row",{staticClass:"head-conte"},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content   vertical-flex"},[e._v("木材表")])]),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content  vertical-flex"},[i("el-dropdown",{on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link "},[e._v("\n        添加木材"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.wood,function(t,s,n){return i("el-dropdown-item",{key:n,attrs:{disabled:t.statu,command:t.name}},[e._v(e._s(t.name))])}))],1)],1)])],1),e._v(" "),i("div",{staticClass:"block height40"},[i("el-tree",{ref:"tree",attrs:{data:e.data,props:e.defaultProps,"node-key":"id"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,n=t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[e._v(e._s(s.label))]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.showDelete(s.label),expression:"showDelete(node.label)"}]},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(s,n)}}},[e._v(" 删除")])],1)])}}])})],1)],1)]),e._v(" "),i("div",{staticClass:"input-box"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("总额 ："+e._s(e.showSum)+" ")])]),e._v(" "),i("div",{staticClass:"text item"},[i("div",{class:{opacityfont:e.isOpacity[0]}},[e._v("小："),i("span",[e._v(e._s(e.little))])]),e._v(" "),i("div",{class:{opacityfont:e.isOpacity[1]}},[e._v("中："),i("span",{domProps:{textContent:e._s(e.medium)}},[e._v("0")])]),e._v(" "),i("div",{class:{opacityfont:e.isOpacity[2]}},[e._v("大："),i("span",{domProps:{textContent:e._s(e.big)}},[e._v("0")])]),e._v(" "),i("div",[i("span",{domProps:{textContent:e._s(e.showgroup)}}),e._v("组和："),i("span",{domProps:{textContent:e._s(e.sum)}},[e._v("0.00")]),e._v("元")])])]),e._v(" "),i("div",[i("div",{staticClass:"el-input el-input-group el-input-group--prepend "},[e._m(0),e._v(" "),i("el-input-number",{attrs:{size:"medium",precision:1,step:.2,max:10},model:{value:e.L,callback:function(t){e.L=t},expression:"L"}})],1)]),e._v(" "),i("div",[i("div",{staticClass:"el-input el-input-group el-input-group--prepend "},[e._m(1),e._v(" "),i("el-input-number",{attrs:{size:"medium",precision:2,step:2,max:100},model:{value:e.D,callback:function(t){e.D=t},expression:"D"}})],1)]),e._v(" "),i("div",{staticClass:"block margin-top10"},[e._v(" 数量\n  "),i("el-slider",{attrs:{"show-input":""},model:{value:e.nubValue,callback:function(t){e.nubValue=t},expression:"nubValue"}})],1),e._v(" "),i("el-button",{staticClass:"bott-butt-data reset-data",attrs:{type:"primary"},on:{click:e.resetCalcula}},[e._v("重置")]),e._v(" "),i("el-button",{staticClass:"bott-butt-data   submit-data",attrs:{type:"primary"},on:{click:e.calculations}},[e._v("提交")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"el-input-group__prepend"},[this._v("L 长度\n        "),t("span",[this._v("m   ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"el-input-group__prepend"},[this._v("D 直径\n        "),t("span",[this._v("cm")])])}]};var C=s("VU/8")(k,y,!1,function(e){s("dG8W")},null,null).exports;n.default.use(m.a);var W=new m.a({routes:[{path:"/",name:"Home",component:C},{path:"/test",name:"test",component:c}]}),T=s("NYxO");s("tvR6"),s("SWQJ");n.default.use(T.a);var R=new T.a.Store({state:{woodtype:"",tree:[],id:-1},actions:{changeGroup:function(e,t){e.commit("changetreeLable",t)}},mutations:{changetreeLable:function(e,t){e.tree=t,e.woodtype=t.label}}});n.default.use(p.a),n.default.use(T.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:W,store:R,components:{App:u},template:"<App/>"})},SWQJ:function(e,t){},VFhj:function(e,t){},dG8W:function(e,t){},tvR6:function(e,t){}},["NHnr"]);